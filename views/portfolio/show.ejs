<% if (profile.is_pro) { %>
  <!-- Pro Portfolio - Modern Techy Design -->
  <div class="portfolio-pro-wrapper">
    <!-- Hero Section with Glassmorphic Card -->
    <section class="portfolio-pro-hero">
      <div class="portfolio-pro-hero__bg">
        <% if (profile.hero_image_path) { %>
          <div class="portfolio-pro-hero__image-wrapper">
            <img src="<%= profile.hero_image_path %>" alt="<%= profile.first_name %> <%= profile.last_name %>" class="portfolio-pro-hero__image">
            <div class="portfolio-pro-hero__overlay"></div>
          </div>
        <% } %>
      </div>
      
      <div class="portfolio-pro-hero__content">
        <div class="portfolio-pro-card portfolio-pro-hero__card">
          <div class="portfolio-pro-hero__header">
            <span class="portfolio-pro-badge">Pro</span>
            <span class="portfolio-pro-eyebrow">ZipSite Portfolio</span>
          </div>
          
          <h1 class="portfolio-pro-name">
            <span class="portfolio-pro-name__first"><%= profile.first_name %></span>
            <span class="portfolio-pro-name__last"><%= profile.last_name %></span>
          </h1>
          
          <p class="portfolio-pro-location"><%= profile.city %></p>
          
          <!-- Stats as Pills -->
          <div class="portfolio-pro-stats">
            <% if (profile.height_cm) { %>
              <div class="portfolio-pro-stat">
                <span class="portfolio-pro-stat__label">Height</span>
                <span class="portfolio-pro-stat__value"><%= profile.height_cm %> cm</span>
              </div>
            <% } %>
            <% if (profile.measurements) { %>
              <div class="portfolio-pro-stat">
                <span class="portfolio-pro-stat__label">Measurements</span>
                <span class="portfolio-pro-stat__value"><%= profile.measurements %></span>
              </div>
            <% } %>
            <% if (profile.gender) { %>
              <div class="portfolio-pro-stat">
                <span class="portfolio-pro-stat__label">Gender</span>
                <span class="portfolio-pro-stat__value"><%= profile.gender %></span>
              </div>
            <% } %>
            <% if (profile.age) { %>
              <div class="portfolio-pro-stat">
                <span class="portfolio-pro-stat__label">Age</span>
                <span class="portfolio-pro-stat__value"><%= profile.age %></span>
              </div>
            <% } %>
            <% if (profile.weight_kg || profile.weight_lbs) { %>
              <div class="portfolio-pro-stat">
                <span class="portfolio-pro-stat__label">Weight</span>
                <span class="portfolio-pro-stat__value">
                  <% if (profile.weight_kg && profile.weight_lbs) { %>
                    <%= profile.weight_kg %> kg / <%= profile.weight_lbs %> lbs
                  <% } else if (profile.weight_kg) { %>
                    <%= profile.weight_kg %> kg
                  <% } else if (profile.weight_lbs) { %>
                    <%= profile.weight_lbs %> lbs
                  <% } %>
                </span>
              </div>
            <% } %>
            <% if (profile.is_pro && profile.languages) { %>
              <div class="portfolio-pro-stat">
                <span class="portfolio-pro-stat__label">Languages</span>
                <span class="portfolio-pro-stat__value">
                  <% 
                    let languagesArray = [];
                    try {
                      languagesArray = typeof profile.languages === 'string' ? JSON.parse(profile.languages) : profile.languages;
                    } catch {
                      languagesArray = [];
                    }
                    const languagesDisplay = Array.isArray(languagesArray) && languagesArray.length > 0 
                      ? languagesArray.join(', ') 
                      : (typeof profile.languages === 'string' ? profile.languages : '');
                  %>
                  <%= languagesDisplay %>
                </span>
              </div>
            <% } %>
            <% if (profile.is_pro && (profile.availability_travel !== null || profile.availability_schedule)) { %>
              <div class="portfolio-pro-stat">
                <span class="portfolio-pro-stat__label">Availability</span>
                <span class="portfolio-pro-stat__value">
                  <% 
                    const availabilityParts = [];
                    if (profile.availability_schedule) availabilityParts.push(profile.availability_schedule);
                    if (profile.availability_travel === true) availabilityParts.push('Willing to travel');
                    const availabilityDisplay = availabilityParts.length > 0 ? availabilityParts.join(' â€¢ ') : '';
                  %>
                  <%= availabilityDisplay %>
                </span>
              </div>
            <% } %>
            <% if (profile.is_pro && profile.experience_level) { %>
              <div class="portfolio-pro-stat">
                <span class="portfolio-pro-stat__label">Experience</span>
                <span class="portfolio-pro-stat__value"><%= profile.experience_level %></span>
              </div>
            <% } %>
          </div>
        </div>
      </div>
    </section>

    <!-- Bio Section -->
    <section class="portfolio-pro-bio">
      <div class="portfolio-pro-container">
        <div class="portfolio-pro-card portfolio-pro-bio__card">
          <h2 class="portfolio-pro-section-title">About</h2>
          <div class="portfolio-pro-bio__content">
            <p><%= profile.bio_curated %></p>
            
            <% if (profile.is_pro && profile.training) { %>
              <div class="portfolio-pro-bio__subsection">
                <h3>Training</h3>
                <p><%= profile.training %></p>
              </div>
            <% } %>
            
            <% if (profile.portfolio_url) { %>
              <div class="portfolio-pro-bio__subsection">
                <h3>Portfolio</h3>
                <p><a href="<%= profile.portfolio_url %>" target="_blank" rel="noopener" class="portfolio-pro-link"><%= profile.portfolio_url %></a></p>
              </div>
            <% } %>
            
            <% if (profile.instagram_handle || profile.twitter_handle || profile.tiktok_handle) { %>
              <div class="portfolio-pro-bio__subsection">
                <h3>Social Media</h3>
                <ul class="portfolio-pro-social">
                  <% if (profile.instagram_handle) { %>
                    <li>
                      <% if (profile.is_pro && profile.instagram_url) { %>
                        <a href="<%= profile.instagram_url %>" target="_blank" rel="noopener" class="portfolio-pro-link">Instagram: @<%= profile.instagram_handle %></a>
                      <% } else { %>
                        Instagram: @<%= profile.instagram_handle %>
                      <% } %>
                    </li>
                  <% } %>
                  <% if (profile.twitter_handle) { %>
                    <li>
                      <% if (profile.is_pro && profile.twitter_url) { %>
                        <a href="<%= profile.twitter_url %>" target="_blank" rel="noopener" class="portfolio-pro-link">Twitter: @<%= profile.twitter_handle %></a>
                      <% } else { %>
                        Twitter: @<%= profile.twitter_handle %>
                      <% } %>
                    </li>
                  <% } %>
                  <% if (profile.tiktok_handle) { %>
                    <li>
                      <% if (profile.is_pro && profile.tiktok_url) { %>
                        <a href="<%= profile.tiktok_url %>" target="_blank" rel="noopener" class="portfolio-pro-link">TikTok: @<%= profile.tiktok_handle %></a>
                      <% } else { %>
                        TikTok: @<%= profile.tiktok_handle %>
                      <% } %>
                    </li>
                  <% } %>
                </ul>
              </div>
            <% } %>
            
            <% if (profile.is_pro && (profile.nationality || profile.union_membership || profile.ethnicity)) { %>
              <div class="portfolio-pro-bio__subsection">
                <h3>Additional Information</h3>
                <ul class="portfolio-pro-info">
                  <% if (profile.nationality) { %>
                    <li><span>Nationality:</span> <%= profile.nationality %></li>
                  <% } %>
                  <% if (profile.union_membership) { %>
                    <li><span>Union:</span> <%= profile.union_membership %></li>
                  <% } %>
                  <% if (profile.ethnicity) { %>
                    <li><span>Ethnicity:</span> <%= profile.ethnicity %></li>
                  <% } %>
                </ul>
              </div>
            <% } %>
            
            <% if (profile.is_pro && (profile.tattoos === true || profile.piercings === true)) { %>
              <div class="portfolio-pro-bio__subsection">
                <h3>Physical Characteristics</h3>
                <ul class="portfolio-pro-info">
                  <% if (profile.tattoos === true) { %>
                    <li>Has visible tattoos</li>
                  <% } %>
                  <% if (profile.piercings === true) { %>
                    <li>Has visible piercings</li>
                  <% } %>
                </ul>
              </div>
            <% } %>
          </div>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section class="portfolio-pro-gallery">
      <div class="portfolio-pro-container">
        <h2 class="portfolio-pro-section-title">Gallery</h2>
        <div class="portfolio-pro-gallery__grid">
          <% images.forEach((item) => { %>
            <figure class="portfolio-pro-gallery__item">
              <img src="<%= item.path %>" alt="<%= item.label || 'Portfolio image' %>" class="portfolio-pro-gallery__image">
              <% if (item.label) { %>
                <figcaption class="portfolio-pro-gallery__caption"><%= item.label %></figcaption>
              <% } %>
            </figure>
          <% }) %>
        </div>
      </div>
    </section>
  </div>
<% } else { %>
  <!-- Free Portfolio - Existing Design -->
  <section class="portfolio-hero">
    <div class="portfolio-hero__meta">
      <span class="eyebrow">ZipSite portfolio</span>
      <h1 class="display"><%= profile.first_name %> <%= profile.last_name %></h1>
      <p class="portfolio-location"><%= profile.city %></p>
      <ul class="portfolio-stats">
        <li><span>Height</span> <%= profile.height_cm %> cm (<%= heightFeet %>)</li>
        <li><span>Measurements</span> <%= profile.measurements %></li>
        <% if (profile.gender) { %>
          <li><span>Gender</span> <%= profile.gender %></li>
        <% } %>
        <% if (profile.age) { %>
          <li><span>Age</span> <%= profile.age %></li>
        <% } %>
        <% if (profile.weight_kg || profile.weight_lbs) { %>
          <li><span>Weight</span>
            <% if (profile.weight_kg && profile.weight_lbs) { %>
              <%= profile.weight_kg %> kg (<%= profile.weight_lbs %> lbs)
            <% } else if (profile.weight_kg) { %>
              <%= profile.weight_kg %> kg
            <% } else if (profile.weight_lbs) { %>
              <%= profile.weight_lbs %> lbs
            <% } %>
          </li>
        <% } %>
        <% if (profile.dress_size) { %>
          <li><span>Dress Size</span> <%= profile.dress_size %></li>
        <% } %>
        <% if (profile.hair_length) { %>
          <li><span>Hair Length</span> <%= profile.hair_length %></li>
        <% } %>
        <% if (profile.skin_tone) { %>
          <li><span>Skin Tone</span> <%= profile.skin_tone %></li>
        <% } %>
      </ul>
    </div>
    <% if (profile.hero_image_path) { %>
      <figure class="portfolio-hero__image">
        <img src="<%= profile.hero_image_path %>" alt="Hero image for <%= profile.first_name %> <%= profile.last_name %>">
      </figure>
    <% } %>
  </section>

  <section class="portfolio-body">
    <article class="portfolio-bio">
      <h2>About</h2>
      <p><%= profile.bio_curated %></p>
      <% if (profile.portfolio_url) { %>
        <div class="portfolio-portfolio">
          <h3>Portfolio</h3>
          <p><a href="<%= profile.portfolio_url %>" target="_blank" rel="noopener"><%= profile.portfolio_url %></a></p>
        </div>
      <% } %>
      <% if (profile.instagram_handle || profile.twitter_handle || profile.tiktok_handle) { %>
        <div class="portfolio-social">
          <h3>Social Media</h3>
          <ul class="portfolio-social-list">
            <% if (profile.instagram_handle) { %>
              <li>Instagram: @<%= profile.instagram_handle %></li>
            <% } %>
            <% if (profile.twitter_handle) { %>
              <li>Twitter: @<%= profile.twitter_handle %></li>
            <% } %>
            <% if (profile.tiktok_handle) { %>
              <li>TikTok: @<%= profile.tiktok_handle %></li>
            <% } %>
          </ul>
        </div>
      <% } %>
    </article>
    <section class="portfolio-gallery">
      <h2>Gallery</h2>
      <div class="portfolio-grid">
        <% images.forEach((item) => { %>
          <figure>
            <img src="<%= item.path %>" alt="<%= item.label || 'Portfolio image' %>">
            <figcaption><%= item.label || 'Portfolio image' %></figcaption>
          </figure>
        <% }) %>
      </div>
    </section>
  </section>
<% } %>
