<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    @page { 
      size: 5.5in 8.5in; 
      margin: 0; 
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* Base Theme Styles */
    .theme-ink {
      background: #FAF9F7;
      color: #0F172A;
    }
    
    .theme-noir {
      background: #0A0A0A;
      color: #FAF9F7;
    }
    
    .theme-studio {
      background: #F4F2F0;
      color: #2D2D2D;
    }
    
    .theme-paper {
      background: #FAF9F7;
      color: #3A3A3A;
    }
    
    .theme-slate {
      background: #1A1A1A;
      color: #ECF0F1;
    }
    
    .theme-archive {
      background: #F5E6D3;
      color: #3D2817;
    }
    
    /* Container */
    .comp-card {
      width: 5.5in;
      height: 8.5in;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    /* Header Section - Name, Location, Stats at Top */
    .comp-card__header {
      padding: 0.35in 0.35in 0.2in;
      position: relative;
    }
    
    /* Magazine Typography - Serif Name */
    .comp-card__name {
      font-family: "Playfair Display", "Georgia", serif;
      font-size: 52px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      line-height: 1;
      margin-bottom: 0.06in;
    }
    
    .theme-ink .comp-card__name {
      color: #0F172A;
    }
    
    .theme-noir .comp-card__name {
      color: #FAF9F7;
    }
    
    .theme-studio .comp-card__name {
      color: #2D2D2D;
    }
    
    .theme-paper .comp-card__name {
      color: #3A3A3A;
    }
    
    .theme-slate .comp-card__name {
      color: #ECF0F1;
    }
    
    .theme-archive .comp-card__name {
      color: #3D2817;
    }
    
    /* Location - Sans-serif, subtle */
    .comp-card__location {
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 9px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      font-weight: 500;
      margin-bottom: 0.12in;
    }
    
    .theme-ink .comp-card__location {
      color: #475569;
    }
    
    .theme-noir .comp-card__location {
      color: rgba(250, 249, 247, 0.7);
    }
    
    .theme-studio .comp-card__location {
      color: #6B6B6B;
    }
    
    .theme-paper .comp-card__location {
      color: #6B6B6B;
    }
    
    .theme-slate .comp-card__location {
      color: #BDC3C7;
    }
    
    .theme-archive .comp-card__location {
      color: #6B5D47;
    }
    
    /* Stats - Clean Sans-serif, Perfectly Aligned */
    .comp-card__stats {
      display: flex;
      gap: 0.3in;
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 9px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-weight: 500;
    }
    
    .comp-card__stat {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }
    
    .comp-card__stat-label {
      opacity: 0.65;
      font-weight: 400;
    }
    
    .comp-card__stat-value {
      font-weight: 600;
      letter-spacing: 0.05em;
    }
    
    .theme-ink .comp-card__stat-value {
      color: #0F172A;
    }
    
    .theme-noir .comp-card__stat-value {
      color: #FAF9F7;
    }
    
    .theme-studio .comp-card__stat-value {
      color: #C9A55A;
    }
    
    .theme-paper .comp-card__stat-value {
      color: #8B7355;
    }
    
    .theme-slate .comp-card__stat-value {
      color: #95A5A6;
    }
    
    .theme-archive .comp-card__stat-value {
      color: #8B6F47;
    }
    
    /* Main Content Area - Balanced Editorial Layout */
    .comp-card__content {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 0.2in 0.35in 0.15in;
      overflow: hidden;
    }
    
    /* Hero Image - Full Width Below Header */
    .comp-card__hero {
      width: 100%;
      height: 3.5in;
      position: relative;
      overflow: hidden;
      background: #E5E5E5;
      margin-bottom: 0.12in;
    }
    
    .comp-card__hero img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    
    /* Gallery - 2x2 Grid Below Hero (Free) or 2x4 Grid (Pro) */
    .comp-card__gallery {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 0.1in;
      flex: 1;
      min-height: 0;
    }
    
    .comp-card__gallery--pro {
      grid-template-rows: repeat(4, 1fr);
    }
    
    .comp-card__gallery-item {
      overflow: hidden;
      background: #E5E5E5;
      position: relative;
    }
    
    .comp-card__gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    
    /* Image Enhancement - Pro Only */
    .comp-card--pro .comp-card__hero img,
    .comp-card--pro .comp-card__gallery-item img {
      filter: contrast(1.05) saturate(1.1) brightness(1.02);
    }
    
    .comp-card--pro .comp-card__hero {
      box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.05);
    }
    
    .comp-card--pro .comp-card__gallery-item {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
    }
    
    /* Bio Section - If Space Allows */
    .comp-card__bio {
      padding: 0.12in 0 0;
      margin-top: 0.1in;
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 8px;
      line-height: 1.6;
      letter-spacing: 0.02em;
      border-top: 1px solid;
    }
    
    .theme-ink .comp-card__bio {
      border-color: rgba(15, 23, 42, 0.1);
      color: #475569;
    }
    
    .theme-noir .comp-card__bio {
      border-color: rgba(250, 249, 247, 0.15);
      color: rgba(250, 249, 247, 0.8);
    }
    
    .theme-studio .comp-card__bio {
      border-color: rgba(45, 45, 45, 0.12);
      color: #4A4A4A;
    }
    
    .theme-paper .comp-card__bio {
      border-color: rgba(58, 58, 58, 0.1);
      color: #4A4A4A;
    }
    
    .theme-slate .comp-card__bio {
      border-color: rgba(236, 240, 241, 0.15);
      color: #BDC3C7;
    }
    
    .theme-archive .comp-card__bio {
      border-color: rgba(61, 40, 23, 0.15);
      color: #5A4A3A;
    }
    
    /* Subtle Branding - Bottom Right Corner */
    .comp-card__branding {
      position: absolute;
      bottom: 0.15in;
      right: 0.35in;
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 6px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      font-weight: 500;
      pointer-events: none;
    }
    
    .theme-ink .comp-card__branding {
      color: rgba(15, 23, 42, 0.4);
    }
    
    .theme-noir .comp-card__branding {
      color: rgba(250, 249, 247, 0.35);
    }
    
    .theme-studio .comp-card__branding {
      color: rgba(45, 45, 45, 0.4);
    }
    
    .theme-paper .comp-card__branding {
      color: rgba(58, 58, 58, 0.4);
    }
    
    .theme-slate .comp-card__branding {
      color: rgba(236, 240, 241, 0.35);
    }
    
    .theme-archive .comp-card__branding {
      color: rgba(61, 40, 23, 0.4);
    }
    
    /* Watermark - More Subtle */
    .comp-card__watermark {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-45deg);
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 42px;
      font-weight: 300;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      pointer-events: none;
      white-space: nowrap;
      z-index: 10;
    }
    
    .theme-ink .comp-card__watermark {
      color: rgba(15, 23, 42, 0.06);
    }
    
    .theme-noir .comp-card__watermark {
      color: rgba(250, 249, 247, 0.04);
    }
    
    .theme-studio .comp-card__watermark {
      color: rgba(45, 45, 45, 0.06);
    }
    
    .theme-paper .comp-card__watermark {
      color: rgba(58, 58, 58, 0.06);
    }
    
    .theme-slate .comp-card__watermark {
      color: rgba(236, 240, 241, 0.04);
    }
    
    .theme-archive .comp-card__watermark {
      color: rgba(61, 40, 23, 0.06);
    }
    
    /* Accent Line - Removed from header, can be added to hero if needed */
    .comp-card__accent {
      display: none;
    }
    
    /* QR Code - Pro Only */
    .comp-card__qr {
      position: absolute;
      bottom: 0.15in;
      left: 0.35in;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }
    
    .comp-card__qr-code {
      width: 0.8in;
      height: 0.8in;
      background: #FFFFFF;
      padding: 4px;
      border-radius: 2px;
    }
    
    .comp-card__qr-code img {
      width: 100%;
      height: 100%;
      display: block;
    }
    
    .comp-card__qr-label {
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 5px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-weight: 500;
      text-align: center;
    }
    
    .theme-ink .comp-card__qr-label {
      color: rgba(15, 23, 42, 0.6);
    }
    
    .theme-noir .comp-card__qr-label {
      color: rgba(250, 249, 247, 0.6);
    }
    
    .theme-studio .comp-card__qr-label {
      color: rgba(45, 45, 45, 0.6);
    }
    
    .theme-paper .comp-card__qr-label {
      color: rgba(58, 58, 58, 0.6);
    }
    
    .theme-slate .comp-card__qr-label {
      color: rgba(236, 240, 241, 0.6);
    }
    
    .theme-archive .comp-card__qr-label {
      color: rgba(61, 40, 23, 0.6);
    }
    
    /* Pro Badge / Upgrade Prompt - Free Users Only */
    .comp-card__pro-badge {
      position: absolute;
      top: 0.2in;
      right: 0.35in;
      background: linear-gradient(135deg, rgba(201, 165, 90, 0.2), rgba(201, 165, 90, 0.1));
      border: 1.5px solid rgba(201, 165, 90, 0.5);
      padding: 0.08in 0.12in;
      border-radius: 4px;
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 7px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 700;
      color: #C9A55A;
      pointer-events: none;
      z-index: 20;
      box-shadow: 0 2px 8px rgba(201, 165, 90, 0.2);
    }
    
    .comp-card__pro-badge::before {
      content: "ðŸ”’ ";
      margin-right: 2px;
    }
    
    /* Locked Theme Preview - Free Users Only */
    .comp-card__theme-preview {
      position: absolute;
      bottom: 0.15in;
      left: 0.35in;
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 5px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-weight: 600;
      opacity: 0.5;
      pointer-events: none;
      z-index: 15;
    }
    
    .theme-ink .comp-card__theme-preview {
      color: rgba(15, 23, 42, 0.4);
    }
    
    .theme-noir .comp-card__theme-preview {
      color: rgba(250, 249, 247, 0.3);
    }
    
    .theme-studio .comp-card__theme-preview {
      color: rgba(45, 45, 45, 0.4);
    }
    
    .theme-paper .comp-card__theme-preview {
      color: rgba(58, 58, 58, 0.4);
    }
    
    .theme-slate .comp-card__theme-preview {
      color: rgba(236, 240, 241, 0.3);
    }
    
    .theme-archive .comp-card__theme-preview {
      color: rgba(61, 40, 23, 0.4);
    }
    
    /* Extended Content Sections - Pro Only */
    .comp-card__extended {
      margin-top: 0.1in;
      padding-top: 0.1in;
      border-top: 1px solid;
    }
    
    .theme-ink .comp-card__extended {
      border-color: rgba(15, 23, 42, 0.1);
    }
    
    .theme-noir .comp-card__extended {
      border-color: rgba(250, 249, 247, 0.15);
    }
    
    .theme-studio .comp-card__extended {
      border-color: rgba(45, 45, 45, 0.12);
    }
    
    .theme-paper .comp-card__extended {
      border-color: rgba(58, 58, 58, 0.1);
    }
    
    .theme-slate .comp-card__extended {
      border-color: rgba(236, 240, 241, 0.15);
    }
    
    .theme-archive .comp-card__extended {
      border-color: rgba(61, 40, 23, 0.15);
    }
    
    .comp-card__section {
      margin-bottom: 0.08in;
    }
    
    .comp-card__section-title {
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 7px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 600;
      margin-bottom: 3px;
    }
    
    .theme-ink .comp-card__section-title {
      color: #0F172A;
    }
    
    .theme-noir .comp-card__section-title {
      color: #FAF9F7;
    }
    
    .theme-studio .comp-card__section-title {
      color: #2D2D2D;
    }
    
    .theme-paper .comp-card__section-title {
      color: #3A3A3A;
    }
    
    .theme-slate .comp-card__section-title {
      color: #ECF0F1;
    }
    
    .theme-archive .comp-card__section-title {
      color: #3D2817;
    }
    
    .comp-card__section-content {
      font-family: "Inter", "Helvetica Neue", "Arial", sans-serif;
      font-size: 7px;
      line-height: 1.5;
      letter-spacing: 0.02em;
    }
    
    .theme-ink .comp-card__section-content {
      color: #475569;
    }
    
    .theme-noir .comp-card__section-content {
      color: rgba(250, 249, 247, 0.8);
    }
    
    .theme-studio .comp-card__section-content {
      color: #4A4A4A;
    }
    
    .theme-paper .comp-card__section-content {
      color: #4A4A4A;
    }
    
    .theme-slate .comp-card__section-content {
      color: #BDC3C7;
    }
    
    .theme-archive .comp-card__section-content {
      color: #5A4A3A;
    }
    
    /* Advanced Stats - Pro Only */
    .comp-card__stats--advanced {
      display: flex;
      flex-wrap: wrap;
      gap: 0.2in 0.3in;
    }
    
    .comp-card__stat--advanced {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0.8in;
    }
  </style>
</head>
<body>
  <div class="comp-card theme-<%= typeof theme !== 'undefined' ? theme : 'ink' %> <%= isPro ? 'comp-card--pro' : '' %>">
    <!-- Pro Badge / Upgrade Prompt - Free Users Only -->
    <% if (!isPro) { %>
    <div class="comp-card__pro-badge">Upgrade to Pro</div>
    <% } %>
    
    <!-- Header: Name, Location, Stats -->
    <header class="comp-card__header">
      <h1 class="comp-card__name"><%= profile.first_name %> <%= profile.last_name %></h1>
      <div class="comp-card__location"><%= profile.city || 'Location' %></div>
      <div class="comp-card__stats <%= isPro ? 'comp-card__stats--advanced' : '' %>">
        <div class="comp-card__stat <%= isPro ? 'comp-card__stat--advanced' : '' %>">
          <span class="comp-card__stat-label">Height</span>
          <span class="comp-card__stat-value"><%= heightFeet %> (<%= profile.height_cm %> cm)</span>
        </div>
        <% if (profile.measurements) { %>
        <div class="comp-card__stat <%= isPro ? 'comp-card__stat--advanced' : '' %>">
          <span class="comp-card__stat-label">Measurements</span>
          <span class="comp-card__stat-value"><%= profile.measurements %></span>
        </div>
        <% } %>
        <% if (isPro) { %>
        <!-- Advanced Stats - Pro Only -->
        <% if (profile.shoe_size) { %>
        <div class="comp-card__stat comp-card__stat--advanced">
          <span class="comp-card__stat-label">Shoe Size</span>
          <span class="comp-card__stat-value"><%= profile.shoe_size %></span>
        </div>
        <% } %>
        <% if (profile.hair_color) { %>
        <div class="comp-card__stat comp-card__stat--advanced">
          <span class="comp-card__stat-label">Hair</span>
          <span class="comp-card__stat-value"><%= profile.hair_color %></span>
        </div>
        <% } %>
        <% if (profile.eye_color) { %>
        <div class="comp-card__stat comp-card__stat--advanced">
          <span class="comp-card__stat-label">Eyes</span>
          <span class="comp-card__stat-value"><%= profile.eye_color %></span>
        </div>
        <% } %>
        <% if (profile.age_range) { %>
        <div class="comp-card__stat comp-card__stat--advanced">
          <span class="comp-card__stat-label">Age Range</span>
          <span class="comp-card__stat-value"><%= profile.age_range %></span>
        </div>
        <% } %>
        <% } %>
      </div>
    </header>
    
    <!-- Main Content: Hero + 2x2 Gallery -->
    <div class="comp-card__content">
      <!-- Hero Image - Full Width -->
      <% if (hero) { %>
      <div class="comp-card__hero">
        <% const heroUrl = hero.startsWith('http') ? hero : baseUrl + (hero.startsWith('/') ? hero : '/' + hero); %>
        <img src="<%= heroUrl %>" alt="<%= profile.first_name %> <%= profile.last_name %>">
        <% if (watermark) { %>
        <div class="comp-card__watermark">Refined by ZipSite</div>
        <% } %>
      </div>
      <% } %>
      
      <!-- Gallery Images - 2x2 Grid (Free) or 2x4 Grid (Pro) -->
      <% if (images && images.length > 0) { %>
      <div class="comp-card__gallery <%= isPro ? 'comp-card__gallery--pro' : '' %>">
        <% const maxImages = isPro ? 8 : 4; %>
        <% images.slice(0, maxImages).forEach((item) => { %>
        <div class="comp-card__gallery-item">
          <% const imageUrl = item.path.startsWith('http') ? item.path : baseUrl + (item.path.startsWith('/') ? item.path : '/' + item.path); %>
          <img src="<%= imageUrl %>" alt="<%= item.label || 'Portfolio image' %>">
        </div>
        <% }) %>
      </div>
      <% } %>
      
      <!-- Bio - If Space Allows -->
      <% if (profile.bio_curated) { %>
      <div class="comp-card__bio">
        <%= profile.bio_curated %>
      </div>
      <% } %>
      
      <!-- Extended Content Sections - Pro Only -->
      <% if (isPro) { %>
      <div class="comp-card__extended">
        <% if (profile.specializations) { %>
        <div class="comp-card__section">
          <div class="comp-card__section-title">Specializations</div>
          <div class="comp-card__section-content"><%= profile.specializations %></div>
        </div>
        <% } %>
        <% if (profile.achievements) { %>
        <div class="comp-card__section">
          <div class="comp-card__section-title">Notable Work</div>
          <div class="comp-card__section-content"><%= profile.achievements %></div>
        </div>
        <% } %>
        <% if (profile.agency_affiliation) { %>
        <div class="comp-card__section">
          <div class="comp-card__section-title">Representation</div>
          <div class="comp-card__section-content"><%= profile.agency_affiliation %></div>
        </div>
        <% } %>
      </div>
      <% } %>
    </div>
    
    <!-- QR Code - Pro Only (Bottom Left) -->
    <% if (isPro && qrCode) { %>
    <div class="comp-card__qr">
      <div class="comp-card__qr-code">
        <img src="<%= qrCode %>" alt="Portfolio QR Code">
      </div>
      <div class="comp-card__qr-label">Scan for Portfolio</div>
    </div>
    <% } else { %>
    <!-- Locked Theme Preview - Free Users Only -->
    <div class="comp-card__theme-preview">ðŸ”’ Pro Themes Available</div>
    <% } %>
    
    <!-- Subtle Branding - Bottom Right -->
    <div class="comp-card__branding">Curated by ZIPSITE</div>
  </div>
</body>
</html>
